<div class="refrigerator-content">
  <h1>🧊 Mein Kühlschrank</h1>

  <ul class="ingredient-list">
    <li *ngFor="let ingredient of ingredientsList(); trackBy: trackByName"
        (click)="selectIngredient(ingredient[0])"
        [class.selected]="ingredient[1]">
      <span>{{ ingredient[0] }}</span>
      <input type="checkbox" [checked]="ingredient[1]" readonly>
    </li>
  </ul>

  <button class="generate-button" (click)="generateMeal()">🍽️ Mahlzeit generieren</button>

  <!-- Anzeige der gefundenen Rezepte -->
  <div class="recipe-container" *ngIf="recipes().length > 0">
    <h2>Gefundene Rezepte:</h2>
    @for(recipe of recipes(); track recipe.name) {
      <h3>{{ recipe.name }}</h3>
      <p><strong>Heiß oder kalt:</strong> {{ recipe.hotOrCold }}</p>
      <p><strong>Gesund:</strong> {{ recipe.healthy ? 'Ja' : 'Nein' }}</p>
      <p><strong>Allergien:</strong> {{ recipe.allergies.join(', ') }}</p>
      <p><strong>Zubereitung:</strong> {{ recipe.howToCook }}</p>
      <h4>Zutaten:</h4>
      <ul>
        @for(ingredient of recipe.ingredients; track ingredient) {
          <li>{{ ingredient }}</li>
        }
        </ul>
      <button (click)="showDetailedRecipe(recipe)">Detaillierte Schritte anzeigen</button>
    }
  </div>

  <!-- Modal für das detaillierte Rezept -->
  <div class="modal-overlay" *ngIf="detailedRecipe()">
    <div class="modal">
      <button class="close-button" (click)="closeModal()">Schließen</button>
      <h2>{{ detailedRecipe()?.name }}</h2>
      <h3>Detaillierte Schritte:</h3>
      <ol>
        <li *ngFor="let step of detailedRecipe()?.detailed_steps">
          {{ step }}
        </li>
      </ol>
      <h4>Zutaten:</h4>
      <ul>
        <li *ngFor="let ingredient of detailedRecipe()?.ingredients">
          {{ ingredient }}
        </li>
      </ul>
      <p><strong>Allergien:</strong> {{ detailedRecipe()?.allergies.join(', ') }}</p>
      <p><strong>Gesund:</strong> {{ detailedRecipe()?.healthy ? 'Ja' : 'Nein' }}</p>
      <p><strong>Heiß oder kalt:</strong> {{ detailedRecipe()?.hotOrCold }}</p>
    </div>
  </div>
</div>
